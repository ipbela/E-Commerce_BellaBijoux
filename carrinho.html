<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho</title>

    <!-- 
    - favicon
  -->
  <link rel="shortcut icon" href="/imgs/joias.png" type="image/svg+xml">

  <!-- 
    - custom css link
  -->
  <link rel="stylesheet" href="./css/styleCarrinho.css">

  <script src="./js/data.js" defer></script>
  <script src="./js/carrinho.js" defer></script>

</head>
<body id="top">

     <!-- 
    - #HEADER
  -->

  <header class="header" data-header>
    <div class="container">

      <div class="overlay" data-overlay></div>

      <a href="index.html" class="logo">
        <img src="./imgs/Logo.png" width="160" height="50" alt="Bella Bijoux Logo">
      </a>

      <button class="nav-open-btn" data-nav-open-btn aria-label="Open Menu">
        <ion-icon name="menu-outline"></ion-icon>
      </button>

      <nav class="navbar" data-navbar>

        <button class="nav-close-btn" data-nav-close-btn aria-label="Close Menu">
          <ion-icon name="close-outline"></ion-icon>
        </button>

        <a href="index.html" class="logo">
          <img src="./imgs/Logo.png" width="160" height="50" alt="Bella Bijoux Logo">
        </a>

        <ul class="navbar-list">

          <li class="navbar-item">
            <a href="index.html" class="navbar-link">Início</a>
          </li>

          <li class="navbar-item">
            <a href="produtos.html" class="navbar-link">Produtos</a>
          </li>

          <li class="navbar-item">
            <a href="sobreNos.html" class="navbar-link">Sobre Nós</a>
          </li>

          <li class="navbar-item">
            <a href="contato.html" class="navbar-link">Contato</a>
          </li>

        </ul>

        <ul class="nav-action-list">

          <li>
            <button class="nav-action-btn">
              <ion-icon name="search-outline" aria-hidden="true" class="search-icon"></ion-icon>
              <input type="text" class="search-input" id="search-input">  
            </button>
          </li>

          <li>
            <a href="register.html" class="nav-action-btn">
              <ion-icon name="person-outline" aria-hidden="true"></ion-icon>

              <span class="nav-action-text">Login/Registro</span>
            </a>
          </li>

          <li>
            <button class="nav-action-btn">
              <a href="favoritos.html" style="color: black;"><ion-icon name="heart-outline" aria-hidden="true"></ion-icon></a>
              <a href="favoritos.html" style="color: black;"><span class="nav-action-text">Favoritos</span></a>
            </button>
          </li>

          <li>
            <button class="nav-action-btn">
              <a href="carrinho.html" style="color: black;"><ion-icon class="car" name="bag-outline" aria-hidden="true"></ion-icon></a>
              <a href="carrinho.html" style="color: black;"><data class="nav-action-text" value="" >Carrinho: </data></a>
            </button>
          </li>

        </ul>

      </nav>

    </div>
  </header>

  <!-- 
    - #CARRINHO
  -->
  <section>

    <div class="first">
      <div class="titulo">
        <img src="imgs/car.png" alt="Icone Carrinho de Compras" width="60px">
        <h1>Carrinho de Compras</h1>
      </div>
  
      <div class="container-roupas" id="carrinho"></div>

      <button type="button" class="limpar" onclick="limparCarrinho()">LIMPAR CARRINHO</button>
    </div>

    <div class="second">

      <div class="total">

        <h6 class="resumo">Resumo da compra</h6>
        <h2 id="total"></h2>
        <a href="#endereco"><button type="submit" class="finalizar">FINALIZAR COMPRA</button></a>
        <a href="produtos.html" class="continue">CONTINUAR COMPRANDO</a>

      </div>

    </div>

  </section>

  <div class="endereco" id="endereco">
    <h1>Registre aqui o seu endereço de entrega!</h1>
    
    <form action="./adm.html" class="form-endereco">

      <label for="">Nome Completo</label>
      <input type="text" class="input-endereco" id="nome" required>

      <label for="">Email</label>
      <input type="email" class="input-endereco" id="email" required>

      <label for="">Telefone</label>
      <input type="tel" class="input-endereco" id="telefone" required>

      <label for="">CEP</label>
      <input type="number" class="input-endereco" id="cep" required>

      <label for="">Estado</label>
      <input type="text" class="input-endereco" id="estado" required>

      <label for="">Cidade</label>
      <input type="text" class="input-endereco" id="cidade" required>

      <label for="">Logradouro</label>
      <input type="text" class="input-endereco" id="logradouro" required>

      <label for="">Número</label>
      <input type="number" class="input-endereco" id="numero" required>

      <label for="">Bairro</label>
      <input type="text" class="input-endereco" id="bairro" required>

      <label for="">Complemento</label>
      <input type="text" class="input-endereco" id="complemento" required>

      <button type="submit" class="enviar" onclick="finalizarCompra()">ENVIAR</button>

    </form>
  </div>

  <!-- 
    - #FOOTER
  -->

  <footer class="footer">

    <div class="footer-top section">
      <div class="container">

        <div class="footer-brand">

          <a href="index.html" class="logo_footer">
            <img src="./imgs/LogoFooter.png" width="160" height="50" alt="Footcap logo">
          </a>

          <ul class="social-list">

            <li>
              <a href="#" class="social-link">
                <ion-icon name="logo-facebook"></ion-icon>
              </a>
            </li>

            <li>
              <a href="#" class="social-link">
                <ion-icon name="logo-instagram"></ion-icon>
              </a>
            </li>

            <li>
              <a href="#" class="social-link">
                <ion-icon name="logo-linkedin"></ion-icon>
              </a>
            </li>

          </ul>

        </div>

      </div>
    </div>

    <div class="footer-bottom">
      <div class="container">

        <p class="copyright">
          &copy; 2023. Isabela Pereira Leite. Todos os direitos reservados.
        </p>

      </div>
    </div>

  </footer>

  <!-- 
    - #GO TO TOP
  -->

  <a href="#top" class="go-top-btn" data-go-top>
    <ion-icon name="arrow-up-outline"></ion-icon>
  </a>


  <!-- 
    - custom js link
  -->
  <script src="./js/script.js"></script>

  <script>

    const cep = document.querySelector("#cep");
    const estado = document.querySelector("#estado");
    const cidade = document.querySelector("#cidade");
    const logradouro = document.querySelector("#logradouro");
    const bairro = document.querySelector("#bairro");
    
    cep.addEventListener('focusout', async() => {

      try{
        const onlyNumbers = /^[0-9]+$/;
        const cepValid = /^[0-9]{8}$/;

        if(!onlyNumbers.test(cep.value) || !cepValid.test(cep.value)){
          throw {cep_error:'Cep Invalido!'};
        }

        const response = await fetch(`https://viacep.com.br/ws/${cep.value}/json/`)
        
        if(!response.ok){
          throw await response.json();
        }

        const responseCep = await response.json();
        
        estado.value = responseCep.uf;
        cidade.value = responseCep.localidade;
        logradouro.value = responseCep.logradouro;
        bairro.value = responseCep.bairro;

      } catch(error){
        if(error?.cep_error){
          alert("O CEP que você digitou é um inválido. Digite um CEP válido!");
        }
        console.log("error");
      }
      
    })

  </script>

  <!-- 
    - ionicon link
  -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    
</body>
</html>